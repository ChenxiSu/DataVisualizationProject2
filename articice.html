<html>
<head>
<script src="http://d3js.org/d3.v3.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<style>
body { font-family: "Open Sans"; }
svg { border: solid black 1px; 
      }
button { padding: 5px; }
</style>
</head>
    
<body>

    
<input type="range" name="rangeInput" min="0" max="37" onclick="updateTextInput(this.value);" step="1" value = "0"
style="width: 500px; height: 0px;">  

 
<script>
    
 function updateTextInput(value) {
     update(value)
 } 
var height=500;
var width=500;
var xScale,yScale;
    
var svgContainer = d3.select("body").append("svg")
                                    .attr("width", width)
                                    .attr("height", height);
//initail state must be the level at start year
var rectangle = svgContainer.append("rect")
                             .attr("x", 0)
                             .attr("y", 450)//need to change to yscale
                             .attr("width", 500)
                             .attr("height", 500)
                             .attr("fill", "#f0ecee")    
                             var lineData = [{ "x": 0,   "y": 50},  { "x": 100,  "y": 0},
                    { "x": 180,  "y": 50}, { "x": 300,   "y": 0},
               { "x": 350,   "y": 50},{ "x": 400,   "y": 0},{ "x": 500,   "y": 50}];
   
var lineFunction = d3.svg.line()
      .x(function(d) { return d.x; })
      .y(function(d) { return d.y; })
   
    
  
var wave=svgContainer.append("path")
                     .attr("d", lineFunction(lineData))
                     .attr("transform", "translate(0,400)")
                     .attr("fill", "#f0ecee");
var glacierline=[];
var svg = d3.select("svg");
    
d3.csv("N_09_area.csv", function (error, data) {
    
  extent = data;
  glacierline = extent.map(function (area) {
    return {
           x:area["Year"],
           y:Number(area["extent"]) 
               };
  })
  //circles = svg.selectAll(".sealine").data(sealine).enter().append("text");
    console.log(glacierline);
    
})
function update(time){
   // console.log(time);
   //related time from csv
  // time=
    
    xScale = d3.scale.linear().domain(d3.extent(glacierline, function (point) {
           return point.x;
        })).range([0, width]);
  
    yScale = d3.scale.linear().domain(d3.extent(glacierline, function (point) {
     //   console.log(point.y);
            return point.y;
        })).range([height-50, 300]);    
   
    var yAxis = d3.svg.axis().scale(yScale).orient("left").ticks(20);
    
    svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(40,0)")
    .call(yAxis);
    var attrY=yScale(glacierline[time].y);
    console.log(glacierline[time].y);
    console.log(attrY);
    
    rectangle.attr("transform", "translate(0," + (attrY-450) + ")")
    wave.attr("transform", "translate(0," + (attrY-50) + ")")
    
}
    
    
       
    var leftPadding = 50;
                    var topPadding = 200;
                    //Coordinates for the svg polar bear
                    var polarbear = [{
                        "x": 18, "y": 152
                    }, {
                        "x": 9, "y": 130
                    }, {
                        "x": 38, "y": 90
                    }, {
                        "x": 54, "y": 53
                    }, {
                        "x": 54, "y": 45
                    }, {
                        "x": 70, "y": 28
                    }, {
                        "x": 98, "y": 22
                    }, {
                        "x": 168, "y": 28
                    }, {
                        "x": 181, "y": 26
                    }, {
                        "x": 243, "y": 45
                    },{
                      "x": 250, "y": 44
                    },
                    {
                      "x": 274, "y": 64
                    }
                    ,{
                      "x": 275, "y": 70
                    
                    },{
                      "x": 288, "y": 85
                    
                    },{
                    "x": 273, "y": 97
                    },{
                    "x": 249, "y": 91
                    },{
                    "x": 210, "y": 92
                    },{
                    "x": 221, "y": 125
                    },{
                    "x": 234, "y": 140
                    },
                    {
                    "x": 239, "y": 140
                    }, {
                    "x": 243, "y": 149
                    },{
                    "x": 202, "y": 149
                    },{
                    "x": 179, "y": 122
                    },{
                    "x": 174, "y": 140
                    },{
                    "x": 185, "y": 142
                    },{
                    "x": 190, "y": 151
                    }, {
                    "x": 148, "y": 151
                    },{
                    "x": 140, "y": 132
                    },{
                    "x": 140, "y": 109
                    },{
                    "x": 123, "y": 108
                    },{
                    "x": 112, "y": 134
                    },{
                    "x": 124, "y": 138
                    },{
                    "x": 129, "y": 145
                    },{
                    "x": 78, "y": 146
                    },{
                    "x": 82, "y": 114
                    },{
                    "x":50, "y": 131
                    },{
                    "x": 46, "y": 138
                    },{
                    "x": 59, "y": 146
                    },{
                    "x": 55, "y": 153
                    },{
                    "x": 18, "y": 152
                    },];

                    var glacier=[{
          
                    
                    "x": 18, "y": 153},
                    {
                      "x":78, "y":150},
                      {
                      "x":128, "y":147},
                    {
                      "x":243, "y":150},
                      {
                      "x":344, "y":203},
                      {
                      "x":360, "y":240},
                      {
                      "x":295, "y":270},
                      {
                      "x":260, "y":300},
                      {
                      "x":260, "y":340},
                      {
                      "x":218, "y":375},
                      {
                      "x":202, "y":350},
                      {
                      "x":170, "y":390},
                      {
                      "x":120, "y":334},
                      {
                      "x":70, "y":300},
                      {
                      "x":50, "y":270},
                      {
                      "x":10, "y":200},
                      {
                      "x":18, "y":153},

                     ];

                    var lineSmooth = d3.svg.line().x(function(d) {
                            return d.x;
                        })
                        .y(function(d) {
                            return d.y;
                        }).interpolate("cardinal");

                    var lineJagged = d3.svg.line().x(function(d) {
                            return d.x;
                        })
                        .y(function(d) {
                            return d.y;
                        });
                     //Adds a cream-colored gradient inside the milk bottle 
                    var grad = svgContainer.append("defs").append("linearGradient").attr("id", "grad").attr("x1", "0%").attr("x2", "0%").attr("y1", "100%").attr("y2", "0%");
                    grad.append("stop").attr("offset", "100%").style("stop-color", "#F5F5F5").append("path");
                    grad.append("stop").attr("offset", "100%").style("stop-color", "#F5F5F5");

                    //Adds a cream-colored gradient inside the milk bottle 
                    var grad2 = svgContainer.append("defs").append("linearGradient").attr("id", "grad").attr("x1", "0%").attr("x2", "0%").attr("y1", "100%").attr("y2", "0%");
                    grad.append("stop").attr("offset", "100%").style("stop-color", "white").append("path");
                    grad.append("stop").attr("offset", "100%").style("stop-color", "white");
                     //Adds a path with lineFunction and draws out the milk bottle svg element
                    svgContainer.append("path").attr("d", lineSmooth(polarbear)).attr("stroke", "#1E1E1E").attr("stroke-width", 3).attr("fill", "url(#grad)").attr("transform", "scale(.5,.5),translate(21.21,500)");

                   svgContainer.append("path").attr("d", lineJagged(glacier)).attr("stroke", "#1E1E1E").attr("stroke-width", 3).attr("fill", "url(#grad2)").attr("transform", "scale(.5,.5),translate(21.21,500)");  

    
</script>
    


</div>
<p>
    
    
    
</body>
</html>